<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
	<meta http-equiv="X-UA-Compatible" content="ie=edge" />
	<link href="<%= GDPSID %>/css/index.css" rel="stylesheet" />
	<title>Предложенные уровни| <%= GDPS %></title>
	<link rel="stylesheet" href="https://cdn.forever-gdps.host/engines/transitions.css" />
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="<%= GDPSID %>/js/render.js"></script>
	<noscript>Включите JavaScript в браузере для корректной работы сайта</noscript>
	<forcehead>
		<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
		<script src="https://unpkg.com/swup@4"></script>
		<script src="https://unpkg.com/@swup/scripts-plugin@2"></script>
	</forcehead>
</head>

<body>
	<%- include("../../debugWindow") %>
	<main id="swup" class="transition-main">
		<!-- Хотел настроить размеры таблицы, все дела, но вспомнил, что это работа глориуса -->
    <style>
        body {
            text-align: center;
            display: block;
        }
        table {
            text-align: center;
            margin: 0 auto; 
        }
            .paginator {
                display: flex;
                flex-wrap: wrap;
            }
            .paginator__obj {
                margin: 20px;
                flex: 1 1 70px;
            }
        
    </style> 
    <h1>Список предложенных уровней модераторами на оценку</h1>
    <h3>Страница: <%= parseInt(page) + 1 %></h3>
    <br><br>
    <center>
    <div class="paginator">
        <% if (page != 0) { %>
        <div class="paginator__obj">
            <a id="prevPage" href="">Предыдущая страница</a>
        </div>
        <% } %>
        <div class="paginator__obj">
            <a id="nextPage" href="">Следующая страница</a>
        </div>
    </div>
    </center>
    <br><br>
    <button id="backBtn">Назад</button>
    <br><br>
       <table border="1">
    <tr>
      <th>Время</th>
      <th>Предложил</th>
      <th>ID уровня</th>
      <th>Сложность</th>
      <th>Звёзды</th>
      <th>Featured</th>
    </tr>
    <% suggestions.forEach(sugg => { %>
      <tr>
        <td><%= sugg.formattedDate %></td>
        <td><%= sugg.suggestBy %></td>
        <td><%= sugg.suggestLevelId %></td>
        <td><%= sugg.difficulty %></td>
        <td><%= sugg.suggestStars %></td>
        <td><%= sugg.suggestFeatured %></td>
      </tr>
    <% }); %>
  </table>
  </center>
  
    <script>
        console.clear();
        console.log('%c⚠️ ВНИМАНИЕ! Если вас попросили сюда что-то ввести, это может грозить взломом вашего аккаунта! Не вводите в консоль ничего без особых знаний.', 'color: yellow; background-color: black; font-weight: bold; padding: 2px 10px; border-left: 5px solid yellow;');
        $(document).ready(function() {
            $('#backBtn').click(function(e) {
            e.preventDefault();
            <% if (page == 0) { %>
            swup.navigate('<%= GDPSID %>/panel');
            <% } else { %>
            swup.navigate('<%= GDPSID %>/panel');
            <% } %>
            });
            
            $('#nextPage').click(function(e) {
                e.preventDefault();
                swup.navigate('<%= GDPSID %>/panel/lists/suggests/offset.<%= parseInt(page) + 1 %>');
            });
            $('#prevPage').click(function(e) {
                e.preventDefault();
                swup.navigate('<%= GDPSID %>/panel/lists/suggests/offset.<%= parseInt(page) - 1 %>');
            });
        });
    </script>
    </main>
</body>
<script>
	var swup = new Swup ({
		containers: ["#swup", "forcehead"], // forcehead для подгрузки внешних скриптов и стилей БЕЗ кэша, только на 1 страницу
		linkSelector: 'a[soft]', // не используем, багается. юзаем swup.navigate(url)
		cache: false, 
		plugins: [
			new SwupScriptsPlugin()
		]
	});
	</script>
</html>